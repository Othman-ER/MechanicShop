@page "/logout"
@using MechanicShop.Client.Identity
@using Microsoft.AspNetCore.Authorization
@attribute [Authorize]

@code {
    [Inject]
    private IAccountManagement accountManagement { get; set; } = default!;

    [Inject]
    private NavigationManager navigationManager { get; set; } = default!;

    protected override async Task OnInitializedAsync()
    {
        if (await accountManagement.CheckAuthenticatedAsync())
            await accountManagement.LogoutAsync();

        navigationManager.NavigateTo("/", replace: true);
    }
}